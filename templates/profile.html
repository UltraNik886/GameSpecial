{% extends "base.html" %}

{% block title %}GameSpecial | –ü—Ä–æ—Ñ–∏–ª—å {{ user.username }}{% endblock %}

{% block content %}
    <h1 style="border-bottom: 2px solid #ff6b81;">–ü—Ä–æ—Ñ–∏–ª—å: {{ user.username }}</h1>
    
    <div class="nav-links">
        {% if session.user_id == user.id %}
            <a href="{{ url_for('edit_profile', username=user.username) }}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
            <a href="{{ url_for('add_game', username=user.username) }}">üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–∞–º–∏</a>
            {% if session.user_id != user.id %}
                <a href="{{ url_for('chat', username=user.username) }}" class="button primary">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</a>
            {% endif %}
        {% else %}
            <a href="{{ url_for('chat', username=user.username) }}" class="button primary">üí¨ –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ</a>
        {% endif %}
    </div>

    <div class="profile-details">
        <h2>–û —Å–µ–±–µ</h2>
        <div class="stylish-text-block">
            {{ user.description or "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–∏–ª –æ–ø–∏—Å–∞–Ω–∏–µ" }}
        </div>
        
        <hr>
        
        <h2>–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
        {% set contact_found = false %}

        <!-- Discord -->
        {% if user.discord %}
            <p><strong>Discord:</strong> <span class="highlight">{{ user.discord }}</span></p>
            {% set contact_found = true %}
        {% endif %}
        
        <!-- Telegram -->
        {% if user.telegram %}
            <p><strong>Telegram:</strong> <span class="highlight">{{ user.telegram }}</span></p>
            {% set contact_found = true %}
        {% endif %}

        <!-- –î—Ä—É–≥–æ–π –∫–æ–Ω—Ç–∞–∫—Ç -->
        {% if user.contact %}
            <p><strong>–î—Ä—É–≥–æ–π –∫–æ–Ω—Ç–∞–∫—Ç:</strong> <span class="highlight">{{ user.contact }}</span></p>
            {% set contact_found = true %}
        {% endif %}

        <!-- –ï—Å–ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã -->
        {% if not contact_found %}
            <p class="placeholder-text">–ö–æ–Ω—Ç–∞–∫—Ç—ã –Ω–µ —É–∫–∞–∑–∞–Ω—ã.</p>
        {% endif %}

        <hr>

        <h2>–ò–≥—Ä—ã {{ user.username }}</h2>
        {% if user.games.count() > 0 %}
            <div class="games-grid">
                {% for game in user.games %}
                    <span class="game-tag">{{ game.game_title }}</span>
                {% endfor %}
            </div>
        {% else %}
            <p class="placeholder-text">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–∏–ª –Ω–∏ –æ–¥–Ω–æ–π –∏–≥—Ä—ã.</p>
        {% endif %}
        
        {% if user.preferred_role %}
        <hr>
        <h2>–ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º–∞—è —Ä–æ–ª—å</h2>
        <p><span class="highlight">{{ user.preferred_role }}</span></p>
        {% endif %}
        
        <hr>
        
        <div class="profile-actions">
            {% if session.user_id == user.id %}
                <form action="{{ url_for('delete_user', username=user.username) }}" method="POST" 
                      onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å.');">
                    <button type="submit" class="delete-button">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</button>
                </form>
            {% endif %}
        </div>
    </div>

    <style>
        .games-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .game-tag {
            background: linear-gradient(135deg, #ff6b81, #e55a70);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .profile-actions {
            margin-top: 20px;
            text-align: center;
        }
    </style>
{% endblock %}