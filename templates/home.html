{% extends "base.html" %}

{% block title %}GameSpecial | –ì–ª–∞–≤–Ω–∞—è{% endblock %}

{% block content %}
    <h1>‚ú® GameSpecial: –ò—â–∏ –∏ –∏–≥—Ä–∞–π!</h1>
    
    <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê -->
    <div class="stats-box">
        <p>üë• –í—Å–µ–≥–æ –≥–µ–π–º–µ—Ä–æ–≤: <strong>{{ user_count }}</strong></p>
        <p>üéÆ –ò–≥—Ä –≤ –±–∞–∑–µ: <strong>{{ games_in_db }}</strong></p>
    </div>

    <div class="nav-actions">
        {% if session.user_id %}
            <a href="{{ url_for('view_profile', username=session.username) }}" class="button primary">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</a>
            <a href="{{ url_for('find_game') }}" class="button secondary">üîé –ù–∞–π—Ç–∏ —Å–æ—é–∑–Ω–∏–∫–æ–≤</a>
        {% else %}
            <a href="{{ url_for('register') }}" class="button primary">‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
            <a href="{{ url_for('login') }}" class="button secondary">üîë –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</a>
        {% endif %}
    </div>
    
    <hr>

    <h2>–°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π ({{ users | length }})</h2>
    
    {% for user in users %}
    <div class="user-card">
        <div class="user-card-content">
            <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ—Ñ–∏–ª—å -->
            <a href="{{ url_for('view_profile', username=user.username) }}">
                <h3>{{ user.username }}</h3>
            </a>
            <p style="color: #a491d3; margin: 5px 0;">–ò–≥—Ä –≤ –ø—Ä–æ—Ñ–∏–ª–µ: {{ user.games.count() }}</p>
            {% if user.preferred_role %}
                <p><strong>–†–æ–ª—å:</strong> <span style="color: #ffcc00;">{{ user.preferred_role }}</span></p>
            {% endif %}
            <a href="{{ url_for('view_profile', username=user.username) }}">üëÄ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
        </div>
        
        <!-- –ö–ù–û–ü–ö–ê –£–î–ê–õ–ï–ù–ò–Ø –ü–†–û–§–ò–õ–Ø (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è) -->
        {% if session.user_id == user.id %}
        <form action="{{ url_for('delete_user', username=user.username) }}" method="POST" 
              onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å {{ user.username }}?');">
            <button type="submit" class="delete-button" title="–£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
        </form>
        {% endif %}
    </div>
    {% else %}
        <div class="placeholder-text">
            <p>–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. <a href="{{ url_for('register') }}">–°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º!</a></p>
        </div>
    {% endfor %}
{% endblock %}