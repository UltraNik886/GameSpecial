{% extends "base.html" %}

{% block title %}GameSpecial | –°–æ–æ–±—â–µ–Ω–∏—è{% endblock %}

{% block content %}
    <h1>üí¨ –ú–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è</h1>
    
    <div class="nav-links">
        <a href="{{ url_for('home') }}">üè† –ì–ª–∞–≤–Ω–∞—è</a>
        <a href="{{ url_for('find_game') }}">üîé –ù–∞–π—Ç–∏ —Å–æ—é–∑–Ω–∏–∫–æ–≤</a>
    </div>

    <div class="chats-list">
        {% if chats %}
            {% for chat in chats %}
                <div class="user-card chat-item" onclick="location.href='{{ url_for('chat', username=chat.user.username) }}'">
                    <div class="chat-avatar">
                        <div class="avatar-placeholder">{{ chat.user.username[0]|upper }}</div>
                    </div>
                    <div class="chat-info">
                        <h3>{{ chat.user.username }}</h3>
                        <p class="last-message">
                            {% if chat.last_message.sender_id == session.user_id %}
                                <strong>–í—ã:</strong> 
                            {% endif %}
                            {{ chat.last_message.content[:50] }}{% if chat.last_message.content|length > 50 %}...{% endif %}
                        </p>
                        <small class="timestamp">{{ chat.last_message.timestamp.strftime('%d.%m.%Y %H:%M') }}</small>
                    </div>
                    {% if chat.unread_count > 0 %}
                        <span class="unread-badge">{{ chat.unread_count }}</span>
                    {% endif %}
                </div>
            {% endfor %}
        {% else %}
            <div class="placeholder-text">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π. <a href="{{ url_for('find_game') }}">–ù–∞–π–¥–∏—Ç–µ —Å–æ—é–∑–Ω–∏–∫–æ–≤</a> –∏ –Ω–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ!</p>
            </div>
        {% endif %}
    </div>
{% endblock %}