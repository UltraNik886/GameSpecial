{% extends "base.html" %}

{% block title %}GameSpecial | –ü–æ–∏—Å–∫ —Å–æ—é–∑–Ω–∏–∫–æ–≤{% endblock %}

{% block content %}
    <h1>üîç –ù–∞–π—Ç–∏ —Å–æ—é–∑–Ω–∏–∫–æ–≤</h1>
    
    <!-- –§–æ—Ä–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∏–≥—Ä–∞–º –∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º -->
    <form method="GET" action="{{ url_for('find_game') }}">
        
        <!-- –°–ï–ö–¶–ò–Ø –§–ò–õ–¨–¢–†–ê–¶–ò–ò –ü–û –ò–ì–†–ê–ú -->
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∏–≥—Ä—É(—ã):</h2>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 30px;">
            {% for game in available_games %}
                <label class="checkbox-container">
                    <input type="checkbox" name="games" value="{{ game }}" 
                           {% if game in selected_games %}checked{% endif %}>
                    <span style="color: #ffcc00; font-weight: bold;">{{ game }}</span>
                </label>
            {% endfor %}
        </div>

        <!-- –°–ï–ö–¶–ò–Ø –§–ò–õ–¨–¢–†–ê–¶–ò–ò –ü–û –ö–û–ù–¢–ê–ö–¢–ê–ú -->
        <h2>–§–∏–ª—å—Ç—Ä –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ (–ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ—Ö, –∫—Ç–æ —É–∫–∞–∑–∞–ª):</h2>
        <div style="display: flex; gap: 20px; margin-bottom: 40px; flex-wrap: wrap;">
            
            <label class="checkbox-container">
                <input type="checkbox" name="contact_filter" value="discord" 
                       {% if 'discord' in contact_filters %}checked{% endif %}>
                <span style="color: #6a5acd; font-weight: bold;">Discord</span>
            </label>
            
            <label class="checkbox-container">
                <input type="checkbox" name="contact_filter" value="telegram" 
                       {% if 'telegram' in contact_filters %}checked{% endif %}>
                <span style="color: #0088cc; font-weight: bold;">Telegram</span>
            </label>
            
        </div>
        
        <button type="submit" class="button primary">üîç –ù–∞–π—Ç–∏ —Å–æ—é–∑–Ω–∏–∫–æ–≤</button>
    </form>
    
    <hr>

    <!-- –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê -->
    <h2>
        {% if selected_games or contact_filters %}
            –ù–∞–π–¥–µ–Ω–æ –≥–µ–π–º–µ—Ä–æ–≤: {{ found_users | length }}
        {% else %}
            –í—Å–µ –≥–µ–π–º–µ—Ä—ã ({{ found_users | length }})
        {% endif %}
    </h2>
    
    {% for user in found_users %}
        <div class="user-card">
            <div class="user-card-content">
                <h3>
                    <a href="{{ url_for('view_profile', username=user.username) }}">
                        {{ user.username }}
                    </a>
                </h3>
                {% if user.preferred_role %}
                    <p><strong>–†–æ–ª—å:</strong> <span class="highlight">{{ user.preferred_role }}</span></p>
                {% endif %}
                <p>
                    <strong>–ò–≥—Ä—ã:</strong> 
                    {% for game in user.games %}
                        <span class="highlight">{{ game.game_title }}</span>{% if not loop.last %}, {% endif %}
                    {% else %}
                        <span class="placeholder-text">–Ω–µ —É–∫–∞–∑–∞–Ω—ã</span>
                    {% endfor %}
                </p>
                <p>
                    <strong>–ö–æ–Ω—Ç–∞–∫—Ç—ã:</strong>
                    {% if user.discord %}<span class="highlight">Discord: {{ user.discord }}</span>{% endif %}
                    {% if user.telegram %}<span class="highlight">Telegram: {{ user.telegram }}</span>{% endif %}
                    {% if user.contact %}<span class="highlight">–î—Ä—É–≥–∏–µ</span>{% endif %}
                    {% if not user.discord and not user.telegram and not user.contact %}
                        <span class="placeholder-text">–Ω–µ —É–∫–∞–∑–∞–Ω—ã</span>
                    {% endif %}
                </p>
                <a href="{{ url_for('view_profile', username=user.username) }}">üëÄ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</a>
            </div>
        </div>
    {% else %}
        <div class="placeholder-text">
            <p>{% if selected_games or contact_filters %}–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —ç—Ç–∏–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º, –Ω–µ –Ω–∞–π–¥–µ–Ω—ã.{% else %}–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.{% endif %}</p>
        </div>
    {% endfor %}
{% endblock %}